# Надёжная доставка и причинный порядок

В рамках данной лабораторной работы необходимо реализовать:

1. Надёжную доставку сообщений поверх fair-loss сети
2. Причинный порядок событий и выявление параллельных сообщений

Работа выполняется на Go с использованием фреймворка [Hive](https://github.com/nikitakosatka/hive).

---

## Контекст

Сеть fair-loss может:

- терять сообщения
- дублировать сообщения

Задача — построить поверх неё протокол, который обеспечивает:

- доставку каждого сообщения ровно один раз
- отсутствие потерь
- сохранение порядка сообщений одного отправителя

Дополнительно необходимо реализовать механизм для определения причинного порядка событий.

---

## Что нужно реализовать

Вам необходимо реализовать:

```go
func NewReliableOrderedNode(id string, allNodeIDs []string) OrderedNode
```

а также методы:

- `Send`
- `Receive`
- `DeliveredMessages`
- `Orderer.Order`

## Требования

### 1. Надёжность

Необходимо обеспечить:

- повторные отправки при потере
- отсутствие повторной доставки (дедупликация)
- подтверждения доставки (ACK), если потребуется
- сохранение порядка сообщений одного отправителя

### 2. Причинный порядок

Необходимо:

- корректно определять отношение happens-before
- выявлять параллельные (конкурентные) события

### 3. Orderer

Метод `Order` должен:

- определить частичный порядок сообщений
- построить его линейное расширение
- вернуть группы параллельных сообщений

---

## Полезные материалы

Надёжная передача данных и механизм ACK:

- RFC 793 — Transmission Control Protocol  
  https://datatracker.ietf.org/doc/html/rfc793

Векторные часы:

- Colin J. Fidge, Timestamps in Message-Passing Systems That Preserve the Partial Ordering, 1988

---

## Тестирование

```bash
go test ./...
```